# ============================================
# SonarQube Environment Configuration
# Copy this file to .env and update with your values
# ============================================

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL Database Credentials
# Change these for production or if you want different credentials
POSTGRES_USER=sonarqube
POSTGRES_PASSWORD=sonarqube_password
POSTGRES_DB=sonarqube

# Database Port Mapping (external:internal)
# POSTGRES_PORT_EXTERNAL: Port exposed on your machine (change if 5433 is in use)
# POSTGRES_PORT_INTERNAL: Port inside container (leave as 5432 unless you know what you're doing)
POSTGRES_PORT_EXTERNAL=5433
POSTGRES_PORT_INTERNAL=5432

# ============================================
# SONARQUBE SERVER CONFIGURATION
# ============================================
# Docker Image Versions
# Use specific versions for production stability
# Latest versions: https://hub.docker.com/_/sonarqube
SONARQUBE_VERSION=10.6.0-community
POSTGRES_VERSION=16-alpine
SONAR_SCANNER_VERSION=latest

# SonarQube Port Mapping (external:internal)
# SONARQUBE_PORT_EXTERNAL: Port to access SonarQube on your machine (change if 9000 is in use)
# SONARQUBE_PORT_INTERNAL: Port inside container (usually 9000)
SONARQUBE_PORT_EXTERNAL=9000
SONARQUBE_PORT_INTERNAL=9000

# SonarQube Server URL for Scanner
# Use container name for Docker scanner: http://sonarqube-server:9000
# Use localhost for browser: http://localhost:9000
SONAR_HOST_URL=http://sonarqube-server:9000

# Container Names
# Change these if you want to run multiple SonarQube instances
POSTGRES_CONTAINER_NAME=sonarqube-db
SONARQUBE_CONTAINER_NAME=sonarqube-server
SCANNER_CONTAINER_NAME=sonarqube-scanner

# Docker Network Name
# Change if you want to use a different network name
SONARQUBE_NETWORK_NAME=sonarqube-network

# ============================================
# SONARQUBE MEMORY SETTINGS
# ============================================
# Adjust these based on your machine's RAM
# Minimum recommended for SonarQube: 2GB RAM
# For large projects: increase SONAR_JAVA_XMX to 4096m or more

# Main Java heap size
SONAR_JAVA_XMX=2048m
SONAR_JAVA_XMS=512m

# Web server heap size
SONAR_WEB_XMX=512m

# Compute engine heap size
SONAR_CE_XMX=512m

# Elasticsearch heap size (embedded in SonarQube)
SONAR_SEARCH_XMS=512m
SONAR_SEARCH_XMX=512m

# ============================================
# SCANNER AUTHENTICATION
# ============================================
# SonarQube Authentication Token
# Generate from: SonarQube UI > Administration > Security > Users > admin > Tokens
# IMPORTANT: Keep this secret! Never commit this to git
SONAR_TOKEN=your-token-here

# ============================================
# SCANNER PROJECT CONFIGURATION
# ============================================
# Project Key (unique identifier for your project)
# Use lowercase, hyphens, no spaces
SONAR_PROJECT_KEY=my-monorepo

# Project Name (human-readable name)
SONAR_PROJECT_NAME=My Awesome Monorepo

# Project Version (semantic versioning recommended)
SONAR_PROJECT_VERSION=1.0.0

# ============================================
# SCANNER SOURCE CONFIGURATION
# ============================================
# Source Directories to Scan
# Examples:
#   Single directory: apps/api
#   Multiple directories: apps,packages
#   Specific apps: apps/api,apps/mobile,packages/trpc
SONAR_SOURCES=apps,packages

# Exclusion Patterns (comma-separated)
# Files/directories to exclude from analysis
SONAR_EXCLUSIONS=**/node_modules/**,**/dist/**,**/build/**,**/.next/**,**/.expo/**,**/coverage/**,**/.git/**,**/.docker/**,**/.venv/**,**/venv/**,**/__pycache__/**,**/*.min.js,**/vendor/**,**/tmp/**,**/temp/**,**/.cache/**

# ============================================
# LANGUAGE CONFIGURATION
# ============================================
# File Type Configuration (separate JS and TS to avoid conflicts)
SONAR_JAVASCRIPT_FILE_SUFFIXES=.js,.jsx,.mjs,.cjs
SONAR_TYPESCRIPT_FILE_SUFFIXES=.ts,.tsx,.cts,.mts

# ============================================
# COVERAGE CONFIGURATION
# ============================================
# Coverage Report Paths
# Point to your test coverage files (LCOV format)
# Examples:
#   Single file: coverage/lcov.info
#   Multiple files: apps/api/coverage/lcov.info,apps/web/coverage/lcov.info
SONAR_JAVASCRIPT_LCOV_REPORTPATHS=coverage/lcov.info

# Coverage Exclusions (test files)
# Files to exclude from coverage calculation
SONAR_COVERAGE_EXCLUSIONS=**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx,**/tests/**,**/__tests__/**,**/test/**

# ============================================
# CODE DUPLICATION CONFIGURATION
# ============================================
# Code Duplication Exclusions
# Files/directories to exclude from duplication detection
SONAR_CPD_EXCLUSIONS=**/tests/**,**/*.test.ts,**/*.spec.ts,**/node_modules/**,**/dist/**,**/build/**

# ============================================
# GENERAL SETTINGS
# ============================================
# Source Encoding
SONAR_SOURCEENCODING=UTF-8

# Verbose Logging (true/false)
# Set to true for detailed scanner output (useful for debugging)
SONAR_VERBOSE=false
